
---
const navItems = [
  {
    spanishTitle: 'Proyectos',
    englishTitle: 'Projects',
    url: '/#proyectos'
  },
  {
    spanishTitle: 'Sobre m√≠',
    englishTitle: 'About Me',
    url: '/#sobre-mi'
  },
  {
    spanishTitle: 'Contacto',
    englishTitle: 'Contact',
    url: '/#contacto'
  },
]
---

<header
  class={`
    flex justify-center items-center
    mx-auto
    py-5
    sticky top-0
    w-full xl:w-[1120px]
    z-10
  `}
>
  <nav
    class={`
      border border-white rounded-full
      px-3 py-1
      flex flex-row items-center
      bg-black/50 
      backdrop-blur-2xl
      text-white
    `}
  >
  {navItems.map(link => (
    <a
      class="hover:bg-white/10 rounded-full px-2 sm:px-3 transition text-sm sm:text-base spanish"
      href={link.url}>{link.spanishTitle}</a
    >
        <a
      class="hover:bg-white/10 rounded-full px-2 sm:px-3 transition text-sm sm:text-base english hidden"
      href={link.url}>{link.englishTitle}</a
    >
  ))}
    <button id="languageButton" type="button" class="hover:bg-white/10 rounded-full px-2 sm:px-3 transition text-sm sm:text-base text-white  english top-20">
      <span class="spanish">
        EN <span class="fi fi-gb"></span>
      </span>
      <span class="english hidden">
        ES <span class="fi fi-es"></span>
      </span>
    </button>
  </nav>
</header>
  
<script>
  const $navAElements: Element[] = [...document.querySelectorAll('header nav a')]

  window.addEventListener('scroll', () => {
    $navAElements.forEach(a => {
      const selectionForSection = a.getAttribute('href')?.substring(1)
      const sectionElement: HTMLDivElement | null = document.querySelector(selectionForSection || '')

      if(!sectionElement) return
      const selectionTop = sectionElement.offsetTop - 150
      if(window.scrollY <= selectionTop) return
      $navAElements.forEach(aToRemove => aToRemove.classList.remove('bg-white/15'))
      a.classList.add('bg-white/15')
    })
  })
</script>
